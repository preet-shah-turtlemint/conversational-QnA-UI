"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Pagination = void 0;
var React = __importStar(require("react"));
var styled_components_1 = __importStar(require("styled-components"));
var app_1 = require("../app");
var icon_1 = __importDefault(require("../icon"));
var colors_1 = __importDefault(require("../__utils/colors"));
var select_1 = __importDefault(require("../select"));
var pageSizeMap = [
    {
        value: 10,
        text: "10 / page"
    },
    {
        value: 20,
        text: "20 / page"
    },
    {
        value: 30,
        text: "30 / page"
    },
    {
        value: 40,
        text: "40 / page"
    }
];
exports.Pagination = function (_a) {
    var total = _a.total, defaultCurrent = _a.defaultCurrent, disabled = _a.disabled, current = _a.current, onChange = _a.onChange, pageSize = _a.pageSize, style = _a.style;
    var getPageSize = function (size) {
        return pageSizeMap.filter(function (page) { return page.value === size; })[0];
    };
    var _b = React.useState(pageSize ? getPageSize(pageSize) : pageSizeMap[0]), currentPageSize = _b[0], setPageSize = _b[1];
    var lastPage = Math.ceil(total / currentPageSize.value);
    var _c = React.useState(defaultCurrent ? defaultCurrent : current ? current : 1), currentPage = _c[0], setCurrentPage = _c[1];
    var _d = React.useState(true), showLeftEllipsis = _d[0], setLeftEllipsis = _d[1];
    var _e = React.useState(true), showRightEllipsis = _e[0], setRightEllipsis = _e[1];
    var resetEllipsis = function () {
        setLeftEllipsis(true);
        setRightEllipsis(true);
    };
    var renderList = function () {
        var pages = [];
        // Lists above six shows ellipsis and makes their own render logic
        if (lastPage > 6) {
            // then based on the activePage pointer render the list of visible page items
            if (currentPage <= 4) {
                pages = [2, 3, 4, 5];
            }
            else if (currentPage > 4 && currentPage <= lastPage - 4) {
                pages = [
                    currentPage - 2,
                    currentPage - 1,
                    currentPage,
                    currentPage + 1,
                    currentPage + 2
                ];
            }
            else {
                //  lastPage - 5 <  currentPage < lastPage
                for (var i = lastPage - 1; i > lastPage - 5; i--) {
                    pages.unshift(i);
                }
            }
        }
        else {
            for (var i = 2; i < lastPage; i++) {
                pages.push(i);
            }
        }
        return pages.map(function (page) { return (React.createElement(Item, { key: page, active: currentPage === page, onClick: function () {
                setCurrentPage(page);
                resetEllipsis();
            }, disabled: disabled },
            React.createElement("a", null, page))); });
    };
    React.useEffect(function () {
        onChange
            ? onChange({ currentPage: currentPage, pageSize: currentPageSize.value })
            : null;
    }, [currentPage, currentPageSize]);
    return (React.createElement(Wrapper, { style: style },
        React.createElement(Item, { key: 0, onClick: function () {
                setCurrentPage(currentPage - 1);
                resetEllipsis();
            }, disabled: currentPage === 1 || disabled },
            React.createElement(icon_1.default, { size: 18, name: "keyboard_arrow_left" })),
        React.createElement(Item, { key: 1, active: currentPage === 1, onClick: function () {
                setCurrentPage(1);
                resetEllipsis();
            }, disabled: disabled },
            React.createElement("a", null, 1)),
        lastPage > 6 && currentPage > 4 ? (React.createElement(Item, { key: -1, border: false, onClick: function () {
                setCurrentPage(1);
                resetEllipsis();
            }, onMouseEnter: function () { return setLeftEllipsis(false); }, onMouseLeave: function () { return setLeftEllipsis(true); }, disabled: disabled }, showLeftEllipsis ? (React.createElement(icon_1.default, { name: "more_horiz" })) : (React.createElement(icon_1.default, { name: "fast_rewind" })))) : null,
        renderList(),
        lastPage > 6 && currentPage <= lastPage - 4 ? (React.createElement(Item, { key: -2, border: false, onClick: function () {
                setCurrentPage(lastPage);
                resetEllipsis();
            }, onMouseEnter: function () { return setRightEllipsis(false); }, onMouseLeave: function () { return setRightEllipsis(true); }, disabled: disabled }, showRightEllipsis ? (React.createElement(icon_1.default, { name: "more_horiz" })) : (React.createElement(icon_1.default, { name: "fast_forward" })))) : null,
        lastPage !== 1 ? (React.createElement(Item, { key: lastPage, active: currentPage === lastPage, onClick: function () {
                setCurrentPage(lastPage);
                resetEllipsis();
            }, disabled: disabled },
            React.createElement("a", null, lastPage))) : null,
        React.createElement(Item, { key: -3, onClick: function () {
                setCurrentPage(currentPage + 1);
                resetEllipsis();
            }, disabled: currentPage === lastPage || disabled },
            React.createElement(icon_1.default, { size: 18, name: "keyboard_arrow_right" })),
        pageSize ? (React.createElement(select_1.default, { value: currentPageSize, onChange: function (value) {
                setPageSize(value);
            }, style: { width: "120px" }, innerStyle: { padding: "4px 8px" }, options: pageSizeMap })) : null));
};
var Wrapper = styled_components_1.default.ul(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n\t", ";\n\tdisplay: flex;\n\tpadding: 0;\n\tmargin: 0;\n"], ["\n\t", ";\n\tdisplay: flex;\n\tpadding: 0;\n\tmargin: 0;\n"])), app_1.GlobalStyles);
var Item = styled_components_1.default.li(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmin-width: 32px;\n\theight: 32px;\n\tmargin-right: 8px;\n\tline-height: 30px;\n\tlist-style: none;\n\tbackground-color: ", ";\n\tborder: ", ";\n\tborder-radius: 4px;\n\toutline: 0;\n\tcursor: pointer;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\ta {\n\t\tcolor: ", ";\n\t}\n\tsvg {\n\t\tfill: ", ";\n\t}\n\t&:hover {\n\t\tborder: ", ";\n\t\ta {\n\t\t\tcolor: ", ";\n\t\t}\n\t\tsvg {\n\t\t\tfill: ", ";\n\t\t}\n\t}\n\t", "\n"], ["\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmin-width: 32px;\n\theight: 32px;\n\tmargin-right: 8px;\n\tline-height: 30px;\n\tlist-style: none;\n\tbackground-color: ", ";\n\tborder: ",
    ";\n\tborder-radius: 4px;\n\toutline: 0;\n\tcursor: pointer;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\ta {\n\t\tcolor: ",
    ";\n\t}\n\tsvg {\n\t\tfill: ", ";\n\t}\n\t&:hover {\n\t\tborder: ",
    ";\n\t\ta {\n\t\t\tcolor: ", ";\n\t\t}\n\t\tsvg {\n\t\t\tfill: ", ";\n\t\t}\n\t}\n\t",
    "\n"])), colors_1.default.WHITE, function (_a) {
    var active = _a.active, _b = _a.border, border = _b === void 0 ? true : _b;
    return border
        ? active
            ? "1px solid " + colors_1.default.PRIMARY_LIGHT
            : "1px solid " + colors_1.default.BORDER
        : 0;
}, function (_a) {
    var active = _a.active;
    return active ? colors_1.default.PRIMARY_LIGHT : colors_1.default.GREY1;
}, colors_1.default.GREY3, function (_a) {
    var _b = _a.border, border = _b === void 0 ? true : _b;
    return border ? "1px solid " + colors_1.default.PRIMARY_LIGHT : 0;
}, colors_1.default.PRIMARY_LIGHT, colors_1.default.PRIMARY_LIGHT, function (_a) {
    var disabled = _a.disabled;
    return disabled && styled_components_1.css(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n\t\t\tbackground-color: ", ";\n\t\t\ta {\n\t\t\t\tcolor: ", ";\n\t\t\t}\n\t\t\tborder-color: ", ";\n\t\t\tpointer-events: none;\n\t\t\tsvg {\n\t\t\t\tfill: ", ";\n\t\t\t}\n\t\t"], ["\n\t\t\tbackground-color: ", ";\n\t\t\ta {\n\t\t\t\tcolor: ", ";\n\t\t\t}\n\t\t\tborder-color: ", ";\n\t\t\tpointer-events: none;\n\t\t\tsvg {\n\t\t\t\tfill: ", ";\n\t\t\t}\n\t\t"])), colors_1.default.BACKGROUND_GREY, colors_1.default.DISABLED, colors_1.default.DISABLED, colors_1.default.DISABLED);
});
exports.default = exports.Pagination;
var templateObject_1, templateObject_2, templateObject_3;
//# sourceMappingURL=index.js.map