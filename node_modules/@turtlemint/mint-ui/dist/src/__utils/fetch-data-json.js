"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var query_string_1 = __importDefault(require("query-string"));
var type_check_1 = require("./type-check");
var fetchDataFromJson = function (data) {
    var url = data.url, params = data.params, valueKey = data.valueKey, displayKey = data.displayKey, dataKey = data.dataKey, _a = data.displayArrKey, displayArrKey = _a === void 0 ? "text" : _a, _b = data.valueArrKey, valueArrKey = _b === void 0 ? "value" : _b;
    // Make an API call and set data for Dropdown
    return fetch(url + "?" + query_string_1.default.stringify(params))
        .then(function (response) { return response.json(); })
        .then(function (jsonR) {
        var responseList = type_check_1._isArray(jsonR)
            ? jsonR
            : jsonR[dataKey];
        var finalList = responseList.reduce(function (acc, item) {
            var _a;
            acc.push((_a = {},
                _a[valueArrKey] = item[valueKey],
                _a[displayArrKey] = item[displayKey],
                _a));
            return acc;
        }, []);
        return finalList;
    });
};
exports.default = fetchDataFromJson;
//# sourceMappingURL=fetch-data-json.js.map