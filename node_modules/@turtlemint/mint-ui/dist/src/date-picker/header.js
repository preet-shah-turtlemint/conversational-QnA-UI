"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Header = void 0;
var React = __importStar(require("react"));
var moment_1 = __importDefault(require("moment"));
var styled_components_1 = __importDefault(require("styled-components"));
var colors_1 = __importDefault(require("../__utils/colors"));
// List of valid Months within min-max date range
var getMonths = function (_a) {
    var date = _a.date, minDate = _a.minDate, maxDate = _a.maxDate;
    // All months by default
    var months = moment_1.default.monthsShort().map(function (month, index) { return ({
        month: month,
        value: index
    }); });
    var minMonthNumber = 1;
    var maxMonthNumber = 12;
    if (minDate.isBefore(date, "year") && date.isBefore(maxDate, "year")) {
        return months;
    }
    // All dates of same year
    if (date.isSame(minDate, "year") && date.isSame(maxDate, "year")) {
        minMonthNumber = minDate.month();
        maxMonthNumber = maxDate.month();
    }
    // Less than Max year and equal to Min year
    if (minDate.isSame(date, "year") && date.isBefore(maxDate, "year")) {
        minMonthNumber = minDate.month();
        maxMonthNumber = date.endOf("year").month();
    }
    // Greater then Min year and equal to Max year
    if (minDate.isBefore(date, "year") && date.isSame(maxDate, "year")) {
        minMonthNumber = date.startOf("year").month();
        maxMonthNumber = maxDate.month();
    }
    return months.filter(function (month) {
        return minMonthNumber <= month.value && month.value <= maxMonthNumber;
    });
};
exports.Header = function (props) {
    var minDate = props.minDate, maxDate = props.maxDate, rest = __rest(props, ["minDate", "maxDate"]);
    var date = moment_1.default(props.date);
    var years = [];
    // Populating years between min-max dates
    for (var y = minDate.year(); y <= maxDate.year(); y++) {
        years.push(y);
    }
    // Callbacks in case we need to add something more in future
    var changeYear = function (year) {
        // Handling month case where year changes and existing month is out of its range
        // Set month to minimum
        if (minDate.year() === year && date.month() < minDate.month()) {
            changeMonth(minDate.month());
        }
        // Set month to maximum
        if (maxDate.year() === year && date.month() > maxDate.month()) {
            changeMonth(maxDate.month());
        }
        // year change
        rest.changeYear(year);
    };
    var changeMonth = function (month) {
        rest.changeMonth(month);
    };
    return (React.createElement(HeaderWrapper, { style: props.headerStyles },
        React.createElement(LeftNavigation, { style: props.navigationStyles, onClick: rest.decreaseMonth, disabled: rest.prevMonthButtonDisabled }, "▲"),
        React.createElement(StyledSelect, { value: date.year(), onChange: function (_a) {
                var value = _a.target.value;
                return changeYear(+value);
            } }, years.map(function (option) { return (React.createElement("option", { key: option, value: option }, option)); })),
        React.createElement(StyledSelect, { value: date.month(), onChange: function (_a) {
                var value = _a.target.value;
                return changeMonth(+value);
            } }, getMonths({ date: date, minDate: minDate, maxDate: maxDate }).map(function (option) { return (React.createElement("option", { key: option.value, value: option.value }, option.month)); })),
        React.createElement(RightNavigation, { style: props.navigationStyles, onClick: rest.increaseMonth, disabled: rest.nextMonthButtonDisabled }, "▲")));
};
var StyledSelect = styled_components_1.default.select(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n\tfont-size: 14px;\n\twidth: 75px;\n\tfont-weight: bold;\n"], ["\n\tfont-size: 14px;\n\twidth: 75px;\n\tfont-weight: bold;\n"])));
var HeaderWrapper = styled_components_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n\tborder-radius: 3px;\n\tpadding: 10px 0px;\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tbackground-color: ", ";\n"], ["\n\tborder-radius: 3px;\n\tpadding: 10px 0px;\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tbackground-color: ", ";\n"])), colors_1.default.PRIMARY);
var LeftNavigation = styled_components_1.default.button(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n\ttransform: rotate(-90deg);\n\tbackground: transparent;\n\tborder: none;\n\tborder-radius: 3px;\n\tfont-size: 15px;\n\tcursor: pointer;\n"], ["\n\ttransform: rotate(-90deg);\n\tbackground: transparent;\n\tborder: none;\n\tborder-radius: 3px;\n\tfont-size: 15px;\n\tcursor: pointer;\n"])));
var RightNavigation = styled_components_1.default.button(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n\ttransform: rotate(90deg);\n\tbackground: transparent;\n\tborder: none;\n\tborder-radius: 3px;\n\tfont-size: 15px;\n\tcursor: pointer;\n"], ["\n\ttransform: rotate(90deg);\n\tbackground: transparent;\n\tborder: none;\n\tborder-radius: 3px;\n\tfont-size: 15px;\n\tcursor: pointer;\n"])));
exports.default = exports.Header;
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;
//# sourceMappingURL=header.js.map